<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hypercast</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous" />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="/Hypercast.png" type="image/png" />
    <script type="module" src="/bundle.js"></script>
  </head>
  <body>
    <div class="ambient">
      <span class="orb orb-1"></span>
      <span class="orb orb-2"></span>
      <span class="orb orb-3"></span>
    </div>
    <main class="shell">
      <header class="topbar">
        <div class="hero-brand">
          <img
            src="/Hypercast.png"
            alt="Hypercast logo"
            class="brand-logo"
            width="48"
            height="48"
            loading="eager"
          />
          <div>
            <p class="eyebrow">Farcaster Live Feed</p>
            <h1>Hypercast Pulse</h1>
            <p class="hero-description">
              High-fidelity cast activity explorer with Hypersnap and SpacetimeDB fallback.
            </p>
          </div>
        </div>
        <div class="status-chip" id="mode-chip">mode: booting</div>
      </header>

      <section class="panel controls">
        <div class="panel-head">
          <h2>Transport Controls</h2>
          <p class="muted">Wire directly into your preferred endpoint, then tune polling and safety in one place.</p>
        </div>
        <div class="source-card__head">
          <div class="field">
            <label for="modeSelect">Data mode</label>
            <select id="modeSelect">
              <option value="hypersnap">Hypersnap</option>
              <option value="spacetime">SpacetimeDB</option>
            </select>
          </div>
          <p class="muted micro" id="trustWarning"></p>
        </div>

        <div class="source-grid">
          <label class="field">
            <span>Hypersnap endpoint</span>
            <input
              id="hypersnapEndpoint"
              type="url"
              placeholder="http://127.0.0.1:3381"
              spellcheck="false"
              aria-label="Hypersnap endpoint"
            />
          </label>

          <label class="field">
            <span>Rows to render</span>
            <input id="uiLimit" type="number" min="5" max="500" step="1" />
          </label>

          <label class="field">
            <span>Poll interval (ms)</span>
            <input id="hypersnapPollIntervalMs" type="number" min="1000" max="120000" step="1000" />
          </label>

          <label class="field">
            <span>Page size</span>
            <input id="hypersnapPageSize" type="number" min="10" max="500" step="1" />
          </label>

          <label class="field">
            <span>Max pages / poll</span>
            <input id="hypersnapMaxPages" type="number" min="1" max="50" step="1" />
          </label>

          <label class="field">
            <span>Request timeout (ms)</span>
            <input id="hypersnapTimeoutMs" type="number" min="1000" max="120000" step="1000" />
          </label>

          <label class="field">
            <span>Sorting</span>
            <label class="inline-checkbox">
              <input id="hypersnapReverse" type="checkbox" />
              <span>latest first</span>
            </label>
          </label>

          <label class="field">
            <span>Host policy</span>
            <label class="inline-checkbox">
              <input id="allowUntrustedHost" type="checkbox" />
              <span>allow untrusted host</span>
            </label>
          </label>
        </div>

        <div class="quick-actions">
          <button id="saveEndpoint" type="button">Save Settings</button>
          <button id="refresh" type="button">Refresh now</button>
          <button id="retry-spacetime" type="button">Retry SpacetimeDB</button>
        </div>
        <p class="muted micro" id="transportMeta"></p>
      </section>

      <section class="panel grid">
        <article class="card">
          <div class="label">Data Source</div>
          <p id="status">initializing...</p>
          <p class="muted" id="statusDetail">...</p>
        </article>
        <article class="card">
          <div class="label">Sync Cursor</div>
          <p id="lastCursor">unknown</p>
        </article>
        <article class="card">
          <div class="label">Visible casts</div>
          <p id="count">0</p>
        </article>
        <article class="card">
          <div class="label">Last Sync</div>
          <p id="lastSyncTime">never</p>
        </article>
        <article class="card">
          <div class="label">Transport latency</div>
          <p id="feedLatency">n/a</p>
        </article>
      </section>

      <section class="panel">
        <div class="panel-head">
          <h2>Connection Health</h2>
          <p class="muted" id="health">initializing</p>
        </div>
      </section>

      <section class="panel" id="feedPanel" aria-live="polite">
        <div class="panel-head">
          <h2>Latest Casts</h2>
          <p class="muted">Latest Hypersnap/Spacetime events are processed and deduped client-side.</p>
        </div>
        <section id="feed" aria-live="polite">
          <div class="empty">Loading latest casts...</div>
        </section>
      </section>
    </main>
  </body>
</html>
